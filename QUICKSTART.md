# å®¢æˆ·è¿½è¸ªç³»ç»Ÿ - å¿«é€Ÿå¼€å§‹ ğŸš€

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº Rust + Vue3 çš„å®¢æˆ·è¿½è¸ªç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå¤šç”¨æˆ·æ•°æ®éš”ç¦»ï¼Œæ¯ä¸ªç”¨æˆ·åªèƒ½ç®¡ç†è‡ªå·±çš„å®¢æˆ·ä¿¡æ¯ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **è¯­è¨€**: Rust Edition 2021
- **æ¡†æ¶**: Axum 0.8.x
- **æ•°æ®åº“**: SQLite + Sea-ORM
- **è®¤è¯**: JWT Token
- **é…ç½®**: .env ç¯å¢ƒå˜é‡

### å‰ç«¯
- **æ¡†æ¶**: Vue 3 + TypeScript
- **UIåº“**: Naive UI
- **çŠ¶æ€ç®¡ç†**: Pinia
- **è·¯ç”±**: Vue Router 4
- **é…ç½®**: .env ç¯å¢ƒå˜é‡

## ğŸ“¦ å¿«é€Ÿå¯åŠ¨

### 1. ç¯å¢ƒè¦æ±‚
```bash
# æ£€æŸ¥ Rust å®‰è£…
cargo --version

# æ£€æŸ¥ Node.js å®‰è£…
npm --version
```

### 2. ç¯å¢ƒå˜é‡é…ç½®ï¼ˆé‡è¦ï¼ï¼‰

ç³»ç»Ÿå·²è‡ªå¸¦ `.env` é…ç½®æ–‡ä»¶ï¼Œ**æ— éœ€æ‰‹åŠ¨é…ç½®ç¯å¢ƒå˜é‡**ã€‚

#### åç«¯é…ç½® (`backend/.env`)
```bash
# æ•°æ®åº“é…ç½®ï¼ˆè‡ªåŠ¨åˆ›å»º ./data/ ç›®å½•ï¼‰
DATABASE_URL=sqlite://./data/customer_tracker.db

# JWTé…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒè¯·ä¿®æ”¹ï¼‰
JWT_SECRET=your-secret-key-change-this-in-production
JWT_EXPIRE_HOURS=24

# æœåŠ¡å™¨é…ç½®
SERVER_HOST=0.0.0.0
SERVER_PORT=3000

# CORSé…ç½®
CORS_ORIGIN=http://localhost:5173

# æ—¥å¿—çº§åˆ«
LOG_LEVEL=info
```

#### å‰ç«¯é…ç½® (`frontend/.env`)
```bash
# APIé…ç½®
VITE_API_BASE_URL=http://localhost:3000

# åº”ç”¨é…ç½®
VITE_APP_TITLE=å®¢æˆ·è¿½è¸ªç³»ç»Ÿ
VITE_APP_VERSION=1.0.0

# å¼€å‘é…ç½®
VITE_DEV_PORT=5173
```

### 3. ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰
```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd customer-tracing

# ä½¿ç”¨å¼€å‘è„šæœ¬å¯åŠ¨
./start-dev.sh
```

### 4. æ‰‹åŠ¨å¯åŠ¨

#### å¯åŠ¨åç«¯
```bash
cd backend

# ç”Ÿæˆå®‰å…¨çš„JWTå¯†é’¥ï¼ˆå¯é€‰ï¼Œå·²æœ‰é»˜è®¤å€¼ï¼‰
cargo run -- server generate-jwt-secret

# åˆå§‹åŒ–æ•°æ®åº“
cargo run -- database migrate

# åˆ›å»ºé»˜è®¤ç”¨æˆ·
cargo run -- user create -u admin -p admin123 -n "ç®¡ç†å‘˜"

# å¯åŠ¨åç«¯æœåŠ¡
cargo run -- server start --port 3000
```

#### å¯åŠ¨å‰ç«¯
```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

## ğŸŒ è®¿é—®åº”ç”¨

- **å‰ç«¯ç•Œé¢**: http://localhost:5173
- **åç«¯API**: http://localhost:3000

## ğŸ”‘ é»˜è®¤è´¦æˆ·

- **ç”¨æˆ·å**: admin
- **å¯†ç **: admin123

## ğŸ’¡ ä¸»è¦åŠŸèƒ½

### âœ… å·²å®ŒæˆåŠŸèƒ½

1. **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ**
   - JWT Token è®¤è¯
   - è‡ªåŠ¨ç™»å½•å’Œtokenåˆ·æ–°
   - è·¯ç”±ä¿æŠ¤

2. **å®¢æˆ·ä¿¡æ¯ç®¡ç†**
   - å®¢æˆ·åˆ—è¡¨å±•ç¤ºï¼ˆåˆ†é¡µã€æœç´¢ï¼‰
   - å®¢æˆ·ä¿¡æ¯CRUDæ“ä½œ
   - æ•°æ®éš”ç¦»ï¼ˆç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„å®¢æˆ·ï¼‰

3. **å®¢æˆ·è·Ÿè¿›è¿½è¸ª**
   - è·Ÿè¿›è®°å½•æ—¶é—´çº¿å±•ç¤º
   - æ·»åŠ /ç¼–è¾‘/åˆ é™¤è·Ÿè¿›è®°å½•
   - ä¸‹ä¸€æ­¥è¡ŒåŠ¨çŠ¶æ€ç®¡ç†ï¼ˆç»§ç»­è·Ÿè¿›/ç»“æŸè·Ÿè¿›ï¼‰

4. **å“åº”å¼è®¾è®¡**
   - ç§»åŠ¨ç«¯ä¼˜å…ˆè®¾è®¡
   - ç°ä»£åŒ–UIç•Œé¢

5. **CLIå·¥å…·**
   - ç”¨æˆ·ç®¡ç†å‘½ä»¤è¡Œå·¥å…·
   - æ•°æ®åº“è¿ç§»å·¥å…·

### ğŸ¨ ç•Œé¢é¢„è§ˆ

- **ç™»å½•é¡µé¢**: æ¸å˜èƒŒæ™¯ + å¡ç‰‡å¼ç™»å½•
- **å®¢æˆ·åˆ—è¡¨**: ç½‘æ ¼å¸ƒå±€å¡ç‰‡å±•ç¤º
- **å®¢æˆ·è¯¦æƒ…**: å®¢æˆ·ä¿¡æ¯ + è·Ÿè¿›æ—¶é—´çº¿
- **è·Ÿè¿›è®°å½•**: æ—¶é—´çº¿å±•ç¤º + å¿«æ·æ¨¡æ¿

## ğŸ“ é¡¹ç›®ç»“æ„

```
customer-tracing/
â”œâ”€â”€ backend/                 # Rust åç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ entities/       # Sea-ORM å®ä½“
â”‚   â”‚   â”œâ”€â”€ handlers/       # API å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ middleware/     # JWT ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ migrations/         # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ frontend/               # Vue3 å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ views/         # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/    # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ stores/        # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ ...
â”œâ”€â”€ start-dev.sh           # å¼€å‘å¯åŠ¨è„šæœ¬
â””â”€â”€ README.md              # è¯¦ç»†æ–‡æ¡£
```

## ğŸ”§ å¼€å‘æŒ‡å—

### CLIç®¡ç†å·¥å…·

æ‰€æœ‰å‘½ä»¤éƒ½é€šè¿‡ç»Ÿä¸€çš„CLIå·¥å…·æ‰§è¡Œï¼š

#### ç”¨æˆ·ç®¡ç†
```bash
# åˆ›å»ºæ–°ç”¨æˆ·  
cargo run -- user create -u <username> -p <password> -n <name>

# åˆ—å‡ºæ‰€æœ‰ç”¨æˆ·
cargo run -- user list

# é‡ç½®ç”¨æˆ·å¯†ç 
cargo run -- user reset-password -u <username> -p <new_password>

# ç¦ç”¨/å¯ç”¨ç”¨æˆ·
cargo run -- user toggle -u <username>
```

#### æ•°æ®åº“ç®¡ç†
```bash
# è¿è¡Œæ•°æ®åº“è¿ç§»
cargo run -- database migrate

# æŸ¥çœ‹æ•°æ®åº“çŠ¶æ€
cargo run -- database status
```

#### æœåŠ¡å™¨ç®¡ç†
```bash
# å¯åŠ¨æœåŠ¡å™¨
cargo run -- server start --port 3000

# ç”ŸæˆJWTå¯†é’¥
cargo run -- server generate-jwt-secret
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
# åç«¯
cd backend
cargo build --release

# å‰ç«¯
cd frontend
npm run build
```

## ğŸ› å¸¸è§é—®é¢˜

1. **ç«¯å£å†²çª**: ç¡®ä¿ 3000 å’Œ 5173 ç«¯å£æœªè¢«å ç”¨
2. **æ•°æ®åº“é”™è¯¯**: åˆ é™¤ `data/customer_tracker.db` åè¿è¡Œ `cargo run -- database migrate`
3. **ä¾èµ–å®‰è£…å¤±è´¥**: æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œä½¿ç”¨å›½å†…é•œåƒæº
4. **JWT_SECRETé”™è¯¯**: è¿è¡Œ `cargo run -- server generate-jwt-secret` è·å–æ–°å¯†é’¥å¹¶æ›´æ–° `.env` æ–‡ä»¶
5. **ç¯å¢ƒå˜é‡é—®é¢˜**: ç¡®ä¿ `backend/.env` å’Œ `frontend/.env` æ–‡ä»¶å­˜åœ¨ä¸”é…ç½®æ­£ç¡®

## ğŸ“„ è¯¦ç»†æ–‡æ¡£

æŸ¥çœ‹ [README.md](./README.md) è·å–å®Œæ•´çš„æŠ€æœ¯æ–‡æ¡£å’ŒAPIè¯´æ˜ã€‚

## ğŸ‰ å¼€å§‹ä½¿ç”¨

1. å¯åŠ¨ç³»ç»Ÿï¼š`./start-dev.sh`
2. è®¿é—®ï¼šhttp://localhost:5173
3. ç™»å½•ï¼šadmin / admin123
4. å¼€å§‹ç®¡ç†æ‚¨çš„å®¢æˆ·ï¼